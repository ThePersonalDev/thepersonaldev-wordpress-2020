<?php

add_action('init', function () {
  register_taxonomy('tpd_journal_tags', 'tpd_journal', [
    'labels' => [
      'name' => 'Tags',
      'singular_name' => 'Tag'
    ],
    'public' => true,
    'show_ui' => true,
    'show_admin_column' => true,
    'query_var' => true,
    'rewrite' => ['slug' => 'journal-tag'],
    'show_in_rest' => true
  ]);

  register_post_type('tpd_journal', [
    'labels' => [
      'name' => 'Journal Entries',
      'singular_name' => 'Journal Entry'
    ],
    'description' => 'For your daily journaling habits',
    'public' => true,
    'exclude_from_search' => true,
    'publicly_queryable' => false,
    'has_archive' => false,
    'menu_icon' => 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1wcmVmaXg9ImZhcyIgZGF0YS1pY29uPSJib29rIiByb2xlPSJpbWciIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBjbGFzcz0ic3ZnLWlubGluZS0tZmEgZmEtYm9vayBmYS13LTE0IGZhLTd4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHN0eWxlPSJib3JkZXItYm90dG9tLWNvbG9yOnJnYigxNzMsIDE4MSwgMTg5KTtib3JkZXItbGVmdC1jb2xvcjpyZ2IoMTczLCAxODEsIDE4OSk7Ym9yZGVyLXJpZ2h0LWNvbG9yOnJnYigxNzMsIDE4MSwgMTg5KTtib3JkZXItdG9wLWNvbG9yOnJnYigxNzMsIDE4MSwgMTg5KTtjb2xvcjpyZ2IoMTczLCAxODEsIDE4OSk7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjExMnB4O2hlaWdodDoxMTJweDtsaW5lLWhlaWdodDoxMjguOHB4O291dGxpbmUtY29sb3I6cmdiKDE3MywgMTgxLCAxODkpO292ZXJmbG93LXg6dmlzaWJsZTtvdmVyZmxvdy15OnZpc2libGU7dGV4dC1kZWNvcmF0aW9uOm5vbmUgc29saWQgcmdiKDE3MywgMTgxLCAxODkpO3RleHQtZGVjb3JhdGlvbi1jb2xvcjpyZ2IoMTczLCAxODEsIDE4OSk7dmVydGljYWwtYWxpZ246LTE0cHg7d2lkdGg6OThweDtjb2x1bW4tcnVsZS1jb2xvcjpyZ2IoMTczLCAxODEsIDE4OSk7cGVyc3BlY3RpdmUtb3JpZ2luOjQ5cHggNTZweDstd2Via2l0LXRleHQtZW1waGFzaXMtY29sb3I6cmdiKDE3MywgMTgxLCAxODkpOy13ZWJraXQtdGV4dC1maWxsLWNvbG9yOnJnYigxNzMsIDE4MSwgMTg5KTstd2Via2l0LXRleHQtc3Ryb2tlLWNvbG9yOnJnYigxNzMsIDE4MSwgMTg5KTt0cmFuc2Zvcm0tb3JpZ2luOjQ5cHggNTZweDtjYXJldC1jb2xvcjpyZ2IoMTczLCAxODEsIDE4OSk7Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik00NDggMzYwVjI0YzAtMTMuMy0xMC43LTI0LTI0LTI0SDk2QzQzIDAgMCA0MyAwIDk2djMyMGMwIDUzIDQzIDk2IDk2IDk2aDMyOGMxMy4zIDAgMjQtMTAuNyAyNC0yNHYtMTZjMC03LjUtMy41LTE0LjMtOC45LTE4LjctNC4yLTE1LjQtNC4yLTU5LjMgMC03NC43IDUuNC00LjMgOC45LTExLjEgOC45LTE4LjZ6TTEyOCAxMzRjMC0zLjMgMi43LTYgNi02aDIxMmMzLjMgMCA2IDIuNyA2IDZ2MjBjMCAzLjMtMi43IDYtNiA2SDEzNGMtMy4zIDAtNi0yLjctNi02di0yMHptMCA2NGMwLTMuMyAyLjctNiA2LTZoMjEyYzMuMyAwIDYgMi43IDYgNnYyMGMwIDMuMy0yLjcgNi02IDZIMTM0Yy0zLjMgMC02LTIuNy02LTZ2LTIwem0yNTMuNCAyNTBIOTZjLTE3LjcgMC0zMi0xNC4zLTMyLTMyIDAtMTcuNiAxNC40LTMyIDMyLTMyaDI4NS40Yy0xLjkgMTcuMS0xLjkgNDYuOSAwIDY0eiIgY2xhc3M9IiIgc3R5bGU9ImJvcmRlci1ib3R0b20tY29sb3I6cmdiKDE3MywgMTgxLCAxODkpO2JvcmRlci1sZWZ0LWNvbG9yOnJnYigxNzMsIDE4MSwgMTg5KTtib3JkZXItcmlnaHQtY29sb3I6cmdiKDE3MywgMTgxLCAxODkpO2JvcmRlci10b3AtY29sb3I6cmdiKDE3MywgMTgxLCAxODkpO2NvbG9yOnJnYigxNzMsIDE4MSwgMTg5KTtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6MTEycHg7aGVpZ2h0OmF1dG87bGluZS1oZWlnaHQ6MTI4LjhweDtvdXRsaW5lLWNvbG9yOnJnYigxNzMsIDE4MSwgMTg5KTtvdmVyZmxvdy14OnZpc2libGU7b3ZlcmZsb3cteTp2aXNpYmxlO3RleHQtZGVjb3JhdGlvbjpub25lIHNvbGlkIHJnYigxNzMsIDE4MSwgMTg5KTt0ZXh0LWRlY29yYXRpb24tY29sb3I6cmdiKDE3MywgMTgxLCAxODkpO3dpZHRoOmF1dG87Y29sdW1uLXJ1bGUtY29sb3I6cmdiKDE3MywgMTgxLCAxODkpO3BlcnNwZWN0aXZlLW9yaWdpbjowcHggMHB4Oy13ZWJraXQtdGV4dC1lbXBoYXNpcy1jb2xvcjpyZ2IoMTczLCAxODEsIDE4OSk7LXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6cmdiKDE3MywgMTgxLCAxODkpOy13ZWJraXQtdGV4dC1zdHJva2UtY29sb3I6cmdiKDE3MywgMTgxLCAxODkpO3RyYW5zZm9ybS1vcmlnaW46MHB4IDBweDtmaWxsOnJnYigxNzMsIDE4MSwgMTg5KTtkOnBhdGgoJnF1b3Q7TSA0NDggMzYwIFYgMjQgQyA0NDggMTAuNyA0MzcuMyAwIDQyNCAwIEggOTYgQyA0MyAwIDAgNDMgMCA5NiBWIDQxNiBDIDAgNDY5IDQzIDUxMiA5NiA1MTIgSCA0MjQgQyA0MzcuMyA1MTIgNDQ4IDUwMS4zIDQ0OCA0ODggViA0NzIgQyA0NDggNDY0LjUgNDQ0LjUgNDU3LjcgNDM5LjEgNDUzLjMgQyA0MzQuOSA0MzcuOSA0MzQuOSAzOTQgNDM5LjEgMzc4LjYgQyA0NDQuNSAzNzQuMyA0NDggMzY3LjUgNDQ4IDM2MCBaIE0gMTI4IDEzNCBDIDEyOCAxMzAuNyAxMzAuNyAxMjggMTM0IDEyOCBIIDM0NiBDIDM0OS4zIDEyOCAzNTIgMTMwLjcgMzUyIDEzNCBWIDE1NCBDIDM1MiAxNTcuMyAzNDkuMyAxNjAgMzQ2IDE2MCBIIDEzNCBDIDEzMC43IDE2MCAxMjggMTU3LjMgMTI4IDE1NCBWIDEzNCBaIE0gMTI4IDE5OCBDIDEyOCAxOTQuNyAxMzAuNyAxOTIgMTM0IDE5MiBIIDM0NiBDIDM0OS4zIDE5MiAzNTIgMTk0LjcgMzUyIDE5OCBWIDIxOCBDIDM1MiAyMjEuMyAzNDkuMyAyMjQgMzQ2IDIyNCBIIDEzNCBDIDEzMC43IDIyNCAxMjggMjIxLjMgMTI4IDIxOCBWIDE5OCBaIE0gMzgxLjQgNDQ4IEggOTYgQyA3OC4zIDQ0OCA2NCA0MzMuNyA2NCA0MTYgQyA2NCAzOTguNCA3OC40IDM4NCA5NiAzODQgSCAzODEuNCBDIDM3OS41IDQwMS4xIDM3OS41IDQzMC45IDM4MS40IDQ0OCBaJnF1b3Q7KTtjYXJldC1jb2xvcjpyZ2IoMTczLCAxODEsIDE4OSk7Ii8+PC9zdmc+',
    'rewrite' => [
      'slug' => 'journal'
    ],
    'supports' => ['title', 'excerpt', 'editor', 'thumbnail'],
    'taxonomies' => ['tpd_journal_tags'],
    'has_archive' => 'tpd_journal_tags',
    'show_in_rest' => true
  ]);
});